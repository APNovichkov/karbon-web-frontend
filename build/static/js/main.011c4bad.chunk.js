(this["webpackJsonpkarbon-web"]=this["webpackJsonpkarbon-web"]||[]).push([[0],{44:function(e,t,s){},45:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s(0),r=s.n(a),n=s(10),o=s.n(n),i=(s(44),s(35)),l=s(3),d=(s(45),s(2)),j=s(31),b=s.n(j),u=s(14);s(18),s(32);var O=function(e){var t=e.handleSearchClick,s=e.setHomeUserAddress,r=Object(a.useState)(!1),n=Object(d.a)(r,2),o=n[0],i=n[1],l=Object(a.useState)(""),j=Object(d.a)(l,2),b=(j[0],j[1],Object(a.useState)()),O=Object(d.a)(b,2),h=(O[0],O[1]),x=Object(a.useState)(),p=Object(d.a)(x,2),f=p[0],m=p[1],v=Object(a.useState)(),g=Object(d.a)(v,2),N=g[0],S=g[1],w=Object(a.useState)(),C=Object(d.a)(w,2),k=(C[0],C[1],Object(a.useState)()),y=Object(d.a)(k,2),A=(y[0],y[1],Object(a.useState)("")),R=Object(d.a)(A,2),T=R[0],E=R[1],I=Object(a.useState)(!0),M=Object(d.a)(I,2),D=(M[0],M[1]),_=Object(a.useState)(!1),P=Object(d.a)(_,2),L=P[0],B=P[1];return Object(a.useEffect)((function(){console.log("Search term changed to: ",T),D(""===T)}),[T]),Object(c.jsxs)("div",{className:"search-header-wrapper text-center",children:[Object(c.jsxs)("div",{className:"search-header",children:[Object(c.jsx)("div",{className:"logo-wrapper",children:Object(c.jsx)("img",{src:"/assets/images/logo.png",className:"search-header-logo",width:"100"})}),Object(c.jsx)("div",{className:"search-header-text-wrapper",children:o?Object(c.jsxs)("div",{className:"search-header-text",children:["Search for Products or Stores in ",Object(c.jsx)("span",{className:"bold-text green-color",children:N.label})]}):Object(c.jsx)("div",{className:"search-header-text",children:"Where do you want to find Products or Stores?"})}),o?Object(c.jsx)("div",{className:"search-bar-wrapper",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Searching for term:",T),B(!0),t(T,f[0],f[1])},className:"form-inline search-bar-form",children:[Object(c.jsx)("input",{value:T,onChange:function(e){return E(e.target.value)},type:"text",className:"search-bar",placeholder:"Search..."}),Object(c.jsx)("button",{type:"submit",className:"search-bar-button",children:Object(c.jsx)("span",{className:"fas fa-search search-bar-icon"})})]})}):Object(c.jsx)("div",{className:"search-bar-wrapper",children:Object(c.jsx)("form",{className:"form-inline search-bar-form",children:Object(c.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(c.jsx)("div",{className:"search-header-locate-me",children:Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),"geolocation"in navigator&&(console.log("location is available"),navigator.geolocation.getCurrentPosition((function(e){console.log("Latitude: ",e.coords.latitude),console.log("Longitude: ",e.coords.longitude),h(!0),m([e.coords.latitude,e.coords.longitude])}))),console.log("Locating User")}(e)},className:"search-bar-button",children:Object(c.jsx)("span",{className:"fas fa-location-arrow location-icon"})}),Object(c.jsxs)("span",{className:"search-header-text locate-me-text",children:["  ","Locate Me"]})]})}),Object(c.jsx)("div",{className:"search-header-find-place",children:Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)(u.a,{style:{width:"200px"},selectProps:{userAddress:N,onChange:S}}),Object(c.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),console.log("Selected address: ",N),s(N),Object(u.b)(N.label).then((function(e){return Object(u.c)(e[0])})).then((function(e){var t=e.lat,s=e.lng;console.log("Successfully got latitude and longitude",{lat:t,lng:s}),m([t,s]),i(!0)}))}(e)},className:"search-bar-button",children:Object(c.jsx)("span",{className:"fas fa-arrow-right search-bar-icon"})})]})})]})})})]}),Object(c.jsx)("div",{className:"d-flex justify-content-center",children:!L&&(o?Object(c.jsxs)("div",{className:"under-development-warning",children:["Search ",Object(c.jsx)("b",{children:'"Drill" or "1.5 Amp Battery" or "Saw"'})," to see working version"]}):Object(c.jsxs)("div",{className:"under-development-warning",children:["Search ",Object(c.jsx)("b",{children:'"Walnut Creek, CA, USA"'})," to see working version"]}))})]})},h=s(33),x=s(34),p=s(38),f=s(37),m=s(15),v={borderRadius:"10px",marginRight:"29px"},g=function(e){Object(p.a)(s,e);var t=Object(f.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(x.a)(s,[{key:"render",value:function(){return Object(c.jsx)(m.Map,{google:this.props.google,zoom:14,fullscreenControl:!1,mapTypeControl:!1,style:v,initialCenter:{lat:this.props.storeCoordinates[0],lng:this.props.storeCoordinates[1]},children:Object(c.jsx)(m.Marker,{onClick:this.onMarkerClick,name:this.props.storeName})})}}]),s}(a.Component),N=Object(m.GoogleApiWrapper)({apiKey:"AIzaSyDiBIZPIuMBCPsaiQxYcqjuQ-WrVSqs90w"})(g),S=function(e){var t=e.iconClass,s=e.colorClass,a=e.text;return Object(c.jsxs)("div",{className:"store-card-tag",children:[Object(c.jsx)("span",{className:"".concat(t," ").concat(s)}),Object(c.jsx)("span",{className:"store-card-tag-text",children:a})]})},w=function(e){var t=e.split(":")[0],s=e.split(":")[1],c=e;return 0==t?c="12:".concat(s,"AM"):t>=12&&(c="".concat(t-12,":").concat(s,"PM")),c},C=function(e,t){var s=k(e),c=k(t);return"".concat("https://www.google.com/maps/dir/?api=1","&origin=").concat(s,"&destination=").concat(c)},k=function(e){return e.replace(" ","+").replace(",","%2C")},y=function(e){var t=e.productData,s=e.userAddress;return Object(c.jsx)("div",{className:"store-card-wrapper",children:Object(c.jsx)("div",{className:"store-card",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-6 col-no-padding",children:Object(c.jsxs)("div",{className:"store-card-text-wrapper",children:[Object(c.jsxs)("div",{className:"store-card-store-name",children:[t.store_name,Object(c.jsxs)("span",{className:"store-card-store-distance",children:["  ","(",t.distance_from_user," Miles)"]})]}),Object(c.jsx)("div",{className:"store-card-store-address",children:t.address}),Object(c.jsxs)("div",{className:"d-flex justify-content-left store-card-tags-wrapper",children:[Object(c.jsx)(S,{iconClass:"far fa-clock",colorClass:"aqua-color",text:"Open until ".concat(w(t.closing_hour))}),Object(c.jsx)(S,{iconClass:"fas fa-shopping-bag",colorClass:"blue-color",text:"Recently in Stock"})]}),Object(c.jsxs)("div",{className:"store-card-price-section",children:[Object(c.jsxs)("span",{className:"store-card-in-store-price",children:["$",t.in_store_price]})," in-store price!","  "]}),Object(c.jsxs)("div",{className:"store-card-product-name",children:['In-store Product Name - "',Object(c.jsxs)("span",{className:"bold-text",children:[t.product_name,'"']})]}),Object(c.jsxs)("div",{className:"store-card-call-to-action-wrapper d-flex justify-content-left",children:[Object(c.jsxs)("a",{href:"tel:".concat(t.phone_number),children:[Object(c.jsx)("button",{className:"store-card-reserve-button",children:"Reserve Now"})," "]}),Object(c.jsxs)("a",{href:C(s.label,t.address),className:"store-card-directions-button text-center",children:["Directions ",Object(c.jsx)("span",{className:"fas fa-chevron-right"})]})]})]})}),Object(c.jsx)("div",{className:"col-md-6 col-no-padding",children:Object(c.jsx)("div",{className:"store-card-map-wrapper",children:Object(c.jsx)(N,{storeCoordinates:t.store_coordinates,storeName:t.store_name})})})]})})})},A=function(e){return Object(c.jsx)("div",{className:"loading-results-wrapper text-center",children:Object(c.jsx)("img",{src:"/assets/images/logo48.png",className:"loading-karbon-logo",id:"karbon-logo"})})},R=10,T=function(e){var t=e.productsLength,s=e.setStartingIndex,r=e.setEndingIndex,n=e.setToScrollToTop,o=Object(a.useState)([]),i=Object(d.a)(o,2),l=i[0],j=i[1],b=Object(a.useState)(0),u=Object(d.a)(b,2),O=u[0],h=u[1];return Object(a.useEffect)((function(){console.log("Setting pagination parameters with products length: ",Math.floor(t/R));for(var e=[],s=0;s<Math.floor(t/R);s++)e.push({index:s+1,indexStart:s*R,indexEnd:(s+1)*R});t%R!=0&&e.push({index:Math.floor(t/R)+1,indexStart:Math.floor(t/R)*R,indexEnd:t}),console.log("Got pArr: ",e),j(e)}),[]),Object(c.jsx)("div",{className:"pagination-wrapper",children:Object(c.jsx)("div",{className:"d-flex justify-content-center",children:l.map((function(e,t){return Object(c.jsx)("div",{onClick:function(t){return function(e,t){console.log("Clicked item with these values: ",t),s(t.indexStart),r(t.indexEnd),h(t.index-1),O!=t.index-1&&n(!0)}(0,e)},className:"pagination-item ".concat(t===O&&"current-pagination-item"),children:e.index})}))})})},E=function(e){var t=e.bestPriceResult,s=e.userAddress,r=Object(a.useState)(0),n=Object(d.a)(r,2),o=n[0],i=n[1],l=Object(a.useState)(10),j=Object(d.a)(l,2),b=j[0],u=j[1],O=Object(a.useState)(!1),h=Object(d.a)(O,2),x=h[0],p=h[1],f=Object(a.useRef)(null);return Object(a.useEffect)((function(){1==x&&(f.current.scrollIntoView({behavior:"smooth"}),p(!1))}),[x]),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{ref:f}),Object(c.jsx)("div",{className:"best-price-wrapper",children:t.slice(o,b).map((function(e){return Object(c.jsx)(y,{productData:e,userAddress:s})}))}),Object(c.jsx)(T,{productsLength:t.length,setStartingIndex:i,setEndingIndex:u,setToScrollToTop:p})]})},I=function(e){var t=e.closestResult,s=e.userAddress,r=Object(a.useState)(0),n=Object(d.a)(r,2),o=n[0],i=n[1],l=Object(a.useState)(10),j=Object(d.a)(l,2),b=j[0],u=j[1],O=Object(a.useState)(!1),h=Object(d.a)(O,2),x=h[0],p=h[1],f=Object(a.useRef)(null);return Object(a.useEffect)((function(){1==x&&(f.current.scrollIntoView({behavior:"smooth"}),p(!1))}),[x]),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{ref:f}),Object(c.jsx)("div",{className:"closest-result-wrapper",children:t.slice(o,b).map((function(e){return Object(c.jsx)(y,{productData:e,userAddress:s})}))}),Object(c.jsx)(T,{productsLength:t.length,setStartingIndex:i,setEndingIndex:u,setToScrollToTop:p})]})},M=function(e){var t=e.relevantResult,s=e.userAddress,r=Object(a.useState)(0),n=Object(d.a)(r,2),o=n[0],i=n[1],l=Object(a.useState)(10),j=Object(d.a)(l,2),b=j[0],u=j[1],O=Object(a.useState)(!1),h=Object(d.a)(O,2),x=h[0],p=h[1],f=Object(a.useRef)(null);return Object(a.useEffect)((function(){1==x&&(f.current.scrollIntoView({behavior:"smooth"}),p(!1))}),[x]),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{ref:f}),Object(c.jsx)("div",{className:"relevant-result-wrapper",children:t.slice(o,b).map((function(e){return Object(c.jsx)(y,{productData:e,userAddress:s})}))}),Object(c.jsx)(T,{productsLength:t.length,setStartingIndex:i,setEndingIndex:u,setToScrollToTop:p})]})},D=function(e){var t=e.setResultToShow,s=Object(a.useState)(!0),r=Object(d.a)(s,2),n=r[0],o=r[1],i=Object(a.useState)(!1),l=Object(d.a)(i,2),j=l[0],b=l[1],u=Object(a.useState)(!1),O=Object(d.a)(u,2),h=O[0],x=O[1];Object(a.useEffect)((function(){t("bestprice")}),[]);return Object(c.jsx)("div",{className:"sidebar-filters-wrapper",children:Object(c.jsxs)("div",{className:"sidebar-filters",children:[Object(c.jsx)("div",{className:"sidebar-filters-header",children:"Filters"}),Object(c.jsxs)("div",{className:"sidebar-filters-items-wrapper",children:[Object(c.jsxs)("div",{onClick:function(e){e.preventDefault(),o(!0),b(!1),x(!1),t("bestprice")},className:"sidebar-filters-item best-price-color ".concat(n?"best-price-selected":"not-selected-padding"),children:[Object(c.jsx)("span",{className:"fas fa-tag"})," Best Price"]}),Object(c.jsxs)("div",{onClick:function(e){e.preventDefault(),o(!1),b(!0),x(!1),t("closestlocation")},className:"sidebar-filters-item closest-result-color ".concat(j?"closest-location-selected":"not-selected-padding"),children:[Object(c.jsx)("span",{className:"fas fa-map-marked-alt"})," Closest Result"]}),Object(c.jsxs)("div",{onClick:function(e){e.preventDefault(),o(!1),b(!1),x(!0),t("relevant")},className:"sidebar-filters-item most-relevant-color ".concat(h?"most-relevant-selected":"not-selected-padding"),children:[Object(c.jsx)("span",{className:"far fa-thumbs-up"})," Most Relevant"]})]})]})})},_=function(e){var t=e.setResultToShow,s=e.sidebarCoordinates,r=Object(a.useState)("false"),n=Object(d.a)(r,2),o=n[0],i=n[1];return Object(a.useEffect)((function(){s>=290&&window.innerWidth>=1200?i(!0):i(!1)}),[s]),Object(c.jsx)("div",{className:"sidebar-wrapper",children:Object(c.jsx)("div",{className:"".concat(o&&"sidebar-fixed-position"," sidebar"),children:Object(c.jsx)(D,{setResultToShow:t})})})},P=function(e,t){t(window.scrollY)},L=function(e){var t=Object(a.useState)([]),s=Object(d.a)(t,2),r=s[0],n=s[1],o=Object(a.useState)([]),i=Object(d.a)(o,2),l=i[0],j=i[1],u=Object(a.useState)([]),h=Object(d.a)(u,2),x=h[0],p=h[1],f=Object(a.useState)(),m=Object(d.a)(f,2),v=m[0],g=m[1],N=Object(a.useState)(!1),S=Object(d.a)(N,2),w=S[0],C=S[1],k=Object(a.useState)(!1),y=Object(d.a)(k,2),R=y[0],T=y[1],D=Object(a.useState)(""),L=Object(d.a)(D,2),B=L[0],F=L[1],W=Object(a.useState)(),U=Object(d.a)(W,2),V=U[0],q=U[1];return Object(a.useEffect)((function(){return window.addEventListener("scroll",(function(e){return P(0,q)})),function(){return window.removeEventListener("scroll",(function(e){return P(0,q)}))}}),[]),Object(c.jsxs)("div",{className:"home-wrapper",children:[Object(c.jsx)(O,{handleSearchClick:function(e,t,s){console.log("Handling search click with search term: ",e),C(!0),b.a.get(function(e,t,s){return"".concat("https://karbon-web-api.dev.novichkov.dev","/search?searchTerm=").concat(e,"&latitude=").concat(t,"&longitude=").concat(s)}(e,t,s)).then((function(e){console.log("Response from search: ",e.data),n(e.data.relevant_result),j(e.data.best_price_result),p(e.data.closest_result),C(!1),T(!0)}))},setHomeUserAddress:g}),w&&Object(c.jsx)(A,{}),Object(c.jsx)("div",{onScroll:P,className:"home-content-wrapper",children:R&&Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-xl-3",children:Object(c.jsx)(_,{setResultToShow:F,sidebarCoordinates:V})}),Object(c.jsx)("div",{className:"col-xl-9",children:Object(c.jsxs)("div",{className:"results-wrapper",children:["bestprice"==B&&Object(c.jsx)("div",{children:l.length>0&&Object(c.jsx)(E,{bestPriceResult:l,userAddress:v})}),"closestlocation"==B&&Object(c.jsx)("div",{children:x.length>0&&Object(c.jsx)(I,{closestResult:x,userAddress:v})}),"relevant"==B&&Object(c.jsx)("div",{children:r.length>0&&Object(c.jsx)(M,{relevantResult:r,userAddress:v})})]})})]})})]})},B=function(e){return Object(c.jsx)("div",{className:"footer-wrapper",children:Object(c.jsx)("div",{className:"footer",children:Object(c.jsx)("div",{className:"footer-text-wrapper",children:Object(c.jsxs)("div",{className:"footer-text",children:["Made with ",Object(c.jsx)("span",{className:"fas fa-heart red-heart"})," in San Francisco"]})})})})};var F=function(){return Object(c.jsx)("div",{children:Object(c.jsxs)(i.a,{children:[Object(c.jsx)("div",{className:"body-wrapper",children:Object(c.jsx)(l.c,{children:Object(c.jsx)(l.a,{path:"/",exact:!0,component:L})})}),Object(c.jsx)(B,{})]})})},W=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,85)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),c(e),a(e),r(e),n(e)}))};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root")),W()}},[[84,1,2]]]);
//# sourceMappingURL=main.011c4bad.chunk.js.map