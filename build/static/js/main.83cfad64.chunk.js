(this["webpackJsonpkarbon-web"]=this["webpackJsonpkarbon-web"]||[]).push([[0],{44:function(e,t,s){},45:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s(0),r=s.n(a),n=s(10),o=s.n(n),l=(s(44),s(35)),i=s(2),d=(s(45),s(3)),j=s(31),b=s.n(j),h=s(14);s(18),s(32);var u=function(e){var t=e.handleSearchClick,s=e.setHomeUserAddress,r=Object(a.useState)(!1),n=Object(d.a)(r,2),o=n[0],l=n[1],i=Object(a.useState)(""),j=Object(d.a)(i,2),b=(j[0],j[1],Object(a.useState)()),u=Object(d.a)(b,2),O=(u[0],u[1]),p=Object(a.useState)(),x=Object(d.a)(p,2),m=x[0],f=x[1],v=Object(a.useState)(),g=Object(d.a)(v,2),N=g[0],w=g[1],S=Object(a.useState)(),C=Object(d.a)(S,2),k=(C[0],C[1],Object(a.useState)()),y=Object(d.a)(k,2),_=(y[0],y[1],Object(a.useState)("")),M=Object(d.a)(_,2),P=M[0],A=M[1],D=Object(a.useState)(!0),L=Object(d.a)(D,2),I=(L[0],L[1]),R=Object(a.useState)(!1),B=Object(d.a)(R,2),F=B[0],T=B[1];return Object(a.useEffect)((function(){console.log("Search term changed to: ",P),I(""===P)}),[P]),Object(c.jsxs)("div",{className:"search-header-wrapper text-center",children:[Object(c.jsxs)("div",{className:"search-header",children:[Object(c.jsx)("div",{className:"logo-wrapper",children:Object(c.jsx)("img",{src:"/assets/images/logo.png",className:"search-header-logo",width:"100"})}),Object(c.jsx)("div",{className:"search-header-text-wrapper",children:o?Object(c.jsxs)("div",{className:"search-header-text",children:["Search for Products or Stores in ",Object(c.jsx)("span",{className:"bold-text green-color",children:N.label})]}):Object(c.jsx)("div",{className:"search-header-text",children:"Where do you want to find Products or Stores?"})}),o?Object(c.jsx)("div",{className:"search-bar-wrapper",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("Searching for term:",P),T(!0),t(P,m[0],m[1])},className:"form-inline search-bar-form",children:[Object(c.jsx)("input",{value:P,onChange:function(e){return A(e.target.value)},type:"text",className:"search-bar",placeholder:"Search..."}),Object(c.jsx)("button",{type:"submit",className:"search-bar-button",children:Object(c.jsx)("span",{className:"fas fa-search search-bar-icon"})})]})}):Object(c.jsx)("div",{className:"search-bar-wrapper",children:Object(c.jsx)("form",{className:"form-inline search-bar-form",children:Object(c.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(c.jsx)("div",{className:"search-header-locate-me",children:Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),"geolocation"in navigator&&(console.log("location is available"),navigator.geolocation.getCurrentPosition((function(e){console.log("Latitude: ",e.coords.latitude),console.log("Longitude: ",e.coords.longitude),O(!0),f([e.coords.latitude,e.coords.longitude])}))),console.log("Locating User")}(e)},className:"search-bar-button",children:Object(c.jsx)("span",{className:"fas fa-location-arrow location-icon"})}),Object(c.jsxs)("span",{className:"search-header-text locate-me-text",children:["  ","Locate Me"]})]})}),Object(c.jsx)("div",{className:"search-header-find-place",children:Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)(h.a,{style:{width:"200px"},selectProps:{userAddress:N,onChange:w}}),Object(c.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),console.log("Selected address: ",N),s(N),Object(h.b)(N.label).then((function(e){return Object(h.c)(e[0])})).then((function(e){var t=e.lat,s=e.lng;console.log("Successfully got latitude and longitude",{lat:t,lng:s}),f([t,s]),l(!0)}))}(e)},className:"search-bar-button",children:Object(c.jsx)("span",{className:"fas fa-arrow-right search-bar-icon"})})]})})]})})})]}),Object(c.jsx)("div",{className:"d-flex justify-content-center",children:!F&&(o?Object(c.jsxs)("div",{className:"under-development-warning",children:["Search ",Object(c.jsx)("b",{children:'"iPhone Charger"'})," to see working version"]}):Object(c.jsxs)("div",{className:"under-development-warning",children:["Search ",Object(c.jsx)("b",{children:'"Moab, UT, USA"'})," to see working version"]}))})]})},O=s(33),p=s(34),x=s(38),m=s(37),f=s(15),v={borderRadius:"10px",marginRight:"29px"},g=function(e){Object(x.a)(s,e);var t=Object(m.a)(s);function s(){return Object(O.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(c.jsx)(f.Map,{google:this.props.google,zoom:14,fullscreenControl:!1,mapTypeControl:!1,style:v,initialCenter:{lat:this.props.storeCoordinates[0],lng:this.props.storeCoordinates[1]},children:Object(c.jsx)(f.Marker,{onClick:this.onMarkerClick,name:this.props.storeName})})}}]),s}(a.Component),N=Object(f.GoogleApiWrapper)({apiKey:"AIzaSyDiBIZPIuMBCPsaiQxYcqjuQ-WrVSqs90w"})(g),w=function(e){var t=e.iconClass,s=e.colorClass,a=e.text;return Object(c.jsxs)("div",{className:"store-card-tag",children:[Object(c.jsx)("span",{className:"".concat(t," ").concat(s)}),Object(c.jsx)("span",{className:"store-card-tag-text",children:a})]})},S=function(e){var t=e.split(":")[0],s=e.split(":")[1],c=e;return 0==t?c="12:".concat(s,"AM"):t>=12&&(c="".concat(t-12,":").concat(s,"PM")),c},C=function(e,t){var s=k(e),c=k(t);return"".concat("https://www.google.com/maps/dir/?api=1","&origin=").concat(s,"&destination=").concat(c)},k=function(e){return e.replace(" ","+").replace(",","%2C")},y=function(e){var t=e.productData,s=e.userAddress;return Object(c.jsx)("div",{className:"store-card-wrapper",children:Object(c.jsx)("div",{className:"store-card",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-6 col-no-padding",children:Object(c.jsxs)("div",{className:"store-card-text-wrapper",children:[Object(c.jsxs)("div",{className:"store-card-store-name",children:[t.store_name,Object(c.jsxs)("span",{className:"store-card-store-distance",children:["  ","(",t.distance_from_user," Miles)"]})]}),Object(c.jsx)("div",{className:"store-card-store-address",children:t.address}),Object(c.jsxs)("div",{className:"d-flex justify-content-left store-card-tags-wrapper",children:[Object(c.jsx)(w,{iconClass:"far fa-clock",colorClass:"aqua-color",text:"Open until ".concat(S(t.closing_hour))}),Object(c.jsx)(w,{iconClass:"fas fa-shopping-bag",colorClass:"blue-color",text:"Recently in Stock"})]}),Object(c.jsxs)("div",{className:"store-card-price-section",children:[Object(c.jsxs)("span",{className:"store-card-in-store-price",children:["$",t.in_store_price]})," in-store price!","  "]}),Object(c.jsxs)("div",{className:"store-card-product-name",children:['In-store Product Name - "',Object(c.jsxs)("span",{className:"bold-text",children:[t.product_name,'"']})]}),Object(c.jsxs)("div",{className:"store-card-call-to-action-wrapper d-flex justify-content-left",children:[Object(c.jsxs)("a",{href:"tel:".concat(t.phone_number),children:[Object(c.jsx)("button",{className:"store-card-reserve-button",children:"Reserve Now"})," "]}),Object(c.jsxs)("a",{href:C(s.label,t.address),className:"store-card-directions-button text-center",children:["Directions ",Object(c.jsx)("span",{className:"fas fa-chevron-right"})]})]})]})}),Object(c.jsx)("div",{className:"col-md-6 col-no-padding",children:Object(c.jsx)("div",{className:"store-card-map-wrapper",children:Object(c.jsx)(N,{storeCoordinates:t.store_coordinates,storeName:t.store_name})})})]})})})},_=function(e){var t=Object(a.useState)([]),s=Object(d.a)(t,2),r=(s[0],s[1],Object(a.useState)([])),n=Object(d.a)(r,2),o=n[0],l=n[1],i=Object(a.useState)([]),j=Object(d.a)(i,2),h=j[0],O=j[1],p=Object(a.useState)([]),x=Object(d.a)(p,2),m=x[0],f=x[1],v=Object(a.useState)(),g=Object(d.a)(v,2),N=g[0],w=g[1],S=Object(a.useState)(!1),C=Object(d.a)(S,2),k=C[0],_=C[1];return Object(c.jsxs)("div",{className:"home-wrapper",children:[Object(c.jsx)(u,{handleSearchClick:function(e,t,s){console.log("Handling search click with search term: ",e),_(!0),b.a.get(function(e,t,s){return"".concat("http://127.0.0.1:5000","/search?searchTerm=").concat(e,"&latitude=").concat(t,"&longitude=").concat(s)}(e,t,s)).then((function(e){console.log("Response from search: ",e.data),l(e.data.relevant_result),O(e.data.best_price_result),f(e.data.closest_result),_(!1)}))},setHomeUserAddress:w}),k&&Object(c.jsx)("div",{className:"loading-results-wrapper text-center",children:Object(c.jsx)("img",{src:"/assets/images/logo48.png",className:"loading-karbon-logo",id:"karbon-logo"})}),!k&&Object(c.jsxs)("div",{className:"results-wrapper",children:[h.length>0?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"best-price-wrapper",children:Object(c.jsxs)("div",{className:"best-price-header",children:[Object(c.jsx)("span",{className:"fas fa-tag"})," Best Price"]})}),h.map((function(e){return Object(c.jsx)(y,{productData:e,userAddress:N})}))]}):Object(c.jsx)("div",{}),h.length>0?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"closest-result-wrapper",children:Object(c.jsxs)("div",{className:"closest-result-header",children:[Object(c.jsx)("span",{className:"fas fa-map-marked-alt"})," Closest Location"]})}),m.map((function(e){return Object(c.jsx)(y,{productData:e,userAddress:N})}))]}):Object(c.jsx)("div",{}),o.length>0?Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"relevant-result-wrapper",children:Object(c.jsxs)("div",{className:"relevant-result-header",children:[Object(c.jsx)("span",{className:"far fa-thumbs-up"})," Most Relevant"]})}),o.map((function(e){return Object(c.jsx)(y,{productData:e,userAddress:N})}))]}):Object(c.jsx)("div",{})]})]})},M=function(e){return Object(c.jsx)("div",{className:"footer-wrapper",children:Object(c.jsx)("div",{className:"footer",children:Object(c.jsx)("div",{className:"footer-text-wrapper",children:Object(c.jsxs)("div",{className:"footer-text",children:["Made with ",Object(c.jsx)("span",{className:"fas fa-heart red-heart"})," in San Francisco"]})})})})};var P=function(){return Object(c.jsx)("div",{children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)("div",{className:"body-wrapper",children:Object(c.jsx)(i.c,{children:Object(c.jsx)(i.a,{path:"/",exact:!0,component:_})})}),Object(c.jsx)(M,{})]})})},A=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,85)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),c(e),a(e),r(e),n(e)}))};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),A()}},[[84,1,2]]]);
//# sourceMappingURL=main.83cfad64.chunk.js.map